<script>
  async function handleSubmit(event) {
    event.preventDefault();

    const form = event.target;
    const formData = new FormData(form);
    const data = Object.fromEntries(formData);

    try {
      // Corrected Fetch URL
      const response = await fetch(".netlify/functions/discord-webhook", {
        method: "POST",
        body: JSON.stringify(data),
        headers: {
          "Content-Type": "application/json",
        },
      });

      if (response.ok) {
        alert("Form submitted successfully!");
      } else {
        alert("Error submitting form.");
      }
    } catch (error) {
      alert("Error: " + error.message);
    }
  }
</script>

<form
  name="vacancy-application"
  netlify
  data-netlify="true"
  method="POST"
  onsubmit="handleSubmit(event)">
  <input type="hidden" name="form-name" value="vacancy-application" />

  <label>
    Name:
    <input type="text" name="name" required />
  </label>

  <label>
    Position:
    <input type="text" name="position" required />
  </label>

  <label>
    Email:
    <input type="email" name="email" required />
  </label>

  <button type="submit">Submit</button>
</form>
